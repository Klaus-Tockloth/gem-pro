<!doctype html>
<html>
  <head>
    <title>Prompts</title>
    <style>
      :root {
        --bg-color: #ffffff;
        --text-color: #000000;
        --button-bg: #eeeeee;
        --button-border: #cccccc;
        --textarea-bg: #f8f8f8;
        --textarea-border: #cccccc;
      }

      /* -- Light Mode (Default) -- */

      body {
        color-scheme: light;
        background-color: var(--bg-color);
        color: var(--text-color);
      }

      button {
        width: 4em;
        height: 1.5em;
        background-color: var(--button-bg);
        color: var(--text-color);
        border: 1px solid var(--button-border);
        border-radius: 3px;
      }

      button:hover {
        background-color: lightgreen;
      }

      textarea {
        width: 100%;
        font-size: 1em;
        font-family: monospace;
        background-color: var(--textarea-bg);
        color: var(--text-color);
        border: 1px solid var(--textarea-border);
        border-radius: 3px;
        resize: vertical;
      }

      .textareaContainer {
        margin-top: 1em;
        display: flex;
        align-items: flex-start;
      }

      .textareaContainer textarea {
        flex-grow: 1;
        margin-right: 0.7em;
        margin-bottom: 0;
      }

      .buttonContainer {
        display: flex;
        flex-direction: column;
        justify-content: flex-start;
      }

      .buttonContainer button {
        margin-bottom: 1em;
      }

      .buttonContainer button:last-child {
        margin-bottom: 0;
      }

      #notification {
        position: fixed;
        top: 10px;
        left: 50%;
        transform: translateX(-50%);
        padding: 10px 20px;
        border-radius: 3px;
        z-index: 1000;
        display: none;
        color: black;
        font-family: monospace;
      }

      #notification.show {
        display: block;
        background-color: lightgreen;
      }

      #notification.error {
        display: block;
        background-color: salmon;
      }

      /* Dark Mode */
      @media (prefers-color-scheme: dark) {
        body {
          color-scheme: dark;
        }

        :root {
          --bg-color: #121212;
          --text-color: #ffffff;
          --button-bg: #333333;
          --button-border: #555555;
          --textarea-bg: #222222;
          --textarea-border: #555555;
        }

        button:hover {
          background-color: darkgreen;
        }
      }
    </style>

    <link
      rel="icon"
      href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text fill='black' y='.9em' font-size='90'>⏎</text></svg>"
      media="(prefers-color-scheme: light)"
    />
    <link
      rel="icon"
      href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text fill='white' y='.9em' font-size='90'>⏎</text></svg>"
      media="(prefers-color-scheme: dark)"
    />
  </head>
  <body>
    <!-- basic prompt (no content, customise prompt to your needs) -->
    <div class="textareaContainer">
      <textarea rows="15" name="prompt"></textarea>
      <div class="buttonContainer">
        <button class="send-to-localhost-button">Send</button>
        <button class="duplicate-button">Copy</button>
      </div>
    </div>

    <!-- basic prompt (schema in German, customise prompt to your needs) -->
    <div class="textareaContainer">
      <textarea rows="15" name="prompt">
##### KONTEXT & ROLLE #####
- Welche Rolle soll die KI einnehmen?
- Was ist der Hintergrund?
- Wen wollen wir erreichen?

##### AUFGABEN und INPUT #####
- Was genau soll getan werden?
- Wie sehen die Input-Daten aus?

##### FORMAT und REGELN #####
- Wie soll das Ergebnis aussehen? (Länge, Stil, Formatierung).
- Welche No-Gos gibt es?
</textarea>
      <div class="buttonContainer">
        <button class="send-to-localhost-button">Send</button>
        <button class="duplicate-button">Copy</button>
      </div>
    </div>

        <!-- basic prompt (coding schema in German, customise prompt to your needs) -->
    <div class="textareaContainer">
      <textarea rows="15" name="prompt">
# SYSTEM / ROLLE
- Du bist ein erfahrener Senior Go-Entwickler und Software-Architekt.
- Deine Prioritäten sind gute Wartbarkeit, Performance und Sicherheit.

# KONTEXT und TECH STACK
- Kontext: [z.B. Gemini KI - Command-Line-Interface]
- Sprache: [z.B. Go v1.25]
- Libs: [z.B. GenAI-SDK v1.40]
- Constraints: [z.B. Füge keine Packages hinzu.]

# AUFGABEN (FEATURE / BUGFIX)
- Liste und Beschreibung der Aufgaben.

## INPUT CODE / LOGS
- Code und/oder Fehlermeldung.

# ANFORDERUNGEN & GUIDELINES

## ARCHITEKTUR und PATTERNS
- Patterns: [falls relevant]
- Algorithmen: [falls relevant]

## CODE-QUALITÄT
- Schreibe idiomatischen, defensiven Code.
- Fehlerbehandlung: Defensive Programmierung.
- Kommentare: Englisch, nur Header und Blöcke.
- Naming: Englisch, deskriptiv und konsistent.

## AUFGABEN (Chain of Thought)
- Implementiere die Lösung.
- Ergänze sinnvolle Tests.

# AUSGABE-FORMAT
- Gib immer vollständige Funktionen / Dateien zurück.
oder
- Gib nur geänderten/ergänzten Code mit Kontext zurück.
- Markiere Änderungen durch '// CHANGED: ...'.
- Markiere Ergänzungen durch '// NEW: ...'.</textarea>
      <div class="buttonContainer">
        <button class="send-to-localhost-button">Send</button>
        <button class="duplicate-button">Copy</button>
      </div>
    </div>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        document.body.addEventListener("click", function (event) {
          if (event.target.classList.contains("send-to-localhost-button")) {
            const textarea = event.target
              .closest(".textareaContainer")
              .querySelector("textarea"); // traverse to .textareaContainer
            const text = textarea.value;

            const notification = document.createElement("div");
            notification.id = "notification";
            notification.textContent = "sending ...";
            document.body.appendChild(notification);

            notification.classList.add("show");

            // customize port number to your needs
            fetch("http://localhost:4242", {
              method: "POST",
              body: text,
              headers: {
                "Content-Type": "text/plain",
              },
            })
              .then((response) => {
                if (!response.ok) {
                  console.error("http error", response);
                  notification.textContent = `error: ${response.status} ${response.statusText}`;
                  notification.classList.add("error");
                } else {
                  console.log("text sent to localhost:4242");
                  notification.textContent = "sent successfully";
                  notification.classList.remove("error");
                }
                return response.text();
              })
              .then((data) => {
                console.log("response from server:", data);
                textarea.focus();
              })
              .catch((error) => {
                console.error("error sending text to localhost:4242:", error);
                notification.textContent = "error sending data";
                notification.classList.add("error");
                textarea.focus();
              })
              .finally(() => {
                // remove notification after 4 seconds
                setTimeout(() => {
                  notification.classList.remove("show");
                  notification.classList.remove("error");
                  document.body.removeChild(notification);
                }, 4000);
              });
          }

          if (event.target.classList.contains("duplicate-button")) {
            const container = event.target.closest(".textareaContainer"); // traverse to .textareaContainer
            const newContainer = container.cloneNode(true);
            const originalTextarea = container.querySelector("textarea");
            const newTextarea = newContainer.querySelector("textarea");
            newTextarea.value = originalTextarea.value;
            container.parentNode.insertBefore(
              newContainer,
              container.nextSibling,
            );
          }
        });

        // set focus on the first textarea and move the cursor to the end
        const firstTextarea = document.querySelector("textarea");
        if (firstTextarea) {
          firstTextarea.focus();
          firstTextarea.selectionStart = firstTextarea.selectionEnd =
            firstTextarea.value.length;
        }
      });
    </script>
  </body>
</html>
